<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Login - Maqueta</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    :root{
      --bg:#f8f9fa; --card:#fff; --text:#222;
    }
    [data-theme="dark"]{
      --bg:#0b1220; --card:#0f1724; --text:#e6eef8;
    }
    body{ background:var(--bg); color:var(--text); }
    .auth-card{ max-width:920px; margin:auto; margin-top:6vh; border-radius:12px; overflow:hidden; box-shadow:0 10px 30px rgba(2,6,23,.25); }
    .hero{ background: linear-gradient(180deg,#0d6efd33,transparent); min-height:300px; display:flex; align-items:center; justify-content:center; }
    .form-control:focus{ box-shadow:none; border-color:#0d6efd; }
    .muted-small{ font-size:.9rem; color:rgba(0,0,0,.55); }
    [data-theme="dark"] .muted-small{ color:rgba(255,255,255,.65); }
  </style>
</head>
<body data-theme="light">
  <div class="container py-5">
    <div class="card auth-card">
      <div class="row g-0">
        <div class="col-md-6 hero p-4">
          <div class="text-center w-100">
            <h1 class="fw-bold">Bienvenido</h1>
            <p class="muted-small">Accede al panel. Demo: <code>admin</code> / <code>1234</code>.</p>
            <img src="assets/placeholder.png" alt="" style="max-width:220px; opacity:.95;">
          </div>
        </div>
        <div class="col-md-6 p-4">
          <div class="mb-3">
            <h5 class="mb-0">Iniciar sesión</h5>
            <small class="muted-small">Introduce tus datos</small>
          </div>

          <form id="loginForm" class="needs-validation" novalidate>
            <div class="mb-3 form-floating">
              <input type="text" class="form-control" id="user" placeholder="Usuario" required>
              <label for="user">Usuario</label>
              <div class="invalid-feedback">Escribe tu usuario.</div>
            </div>

            <div class="mb-3 form-floating">
              <input type="password" class="form-control" id="password" placeholder="Contraseña" minlength="1" required>
              <label for="password">Contraseña</label>
              <div class="form-text muted-small">Introduce tu contraseña.</div>
              <div class="invalid-feedback">Contraseña requerida.</div>
            </div>

            <div class="d-grid mb-3">
              <button class="btn btn-primary btn-lg" type="submit">Entrar</button>
            </div>
          </form>

          <hr>

          <div class="text-center muted-small">
            <small>Versión demo · Maqueta frontend · Sin backend real</small>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
(function(){
  const form = document.getElementById('loginForm');

  // Detectar base URL según entorno
  const BASE_URL = window.location.hostname.includes('localhost') 
      ? 'http://127.0.0.1:8000' 
      : 'https://storeapp-production-9a82.up.railway.app';

  form.addEventListener('submit', async function(e){
      e.preventDefault();
      if (!form.checkValidity()) { form.classList.add('was-validated'); return; }

      const user = document.getElementById('user').value.trim();
      const passwd = document.getElementById('password').value;

      try {
          const res = await fetch(`${BASE_URL}/login`, {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ user, password: passwd })
          });

          if (!res.ok) throw new Error('Credenciales incorrectas');
          const data = await res.json();

          // Login exitoso → redirigir
          window.location.href = '/app.html';
      } catch (err) {
          alert(err.message);
      }
  });
})();
</script>



})();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
